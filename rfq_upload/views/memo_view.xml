<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_memo_form_rfq_upload" model="ir.ui.view">
        <field name="name">memo.model.form.rfq.upload</field>
        <field name="model">memo.model</field>
        <field name="inherit_id" ref="company_memo.memo_model_form_view_3"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='memo_type_key']" position="after">
                <field name="rfq_uploaded" invisible="1"/>
                <field name="rfq_upload_date" invisible="1"/>
                <field name="rfq_excel_file" invisible="1"/>
                <field name="rfq_excel_filename" invisible="1"/>
            </xpath>

            <xpath expr="//field[@name='po_ids']//tree//field[@name='amount_total']" position="after">
                <field name="rfq_source" string="Source" widget="badge"
                       decoration-info="rfq_source == 'manual'"
                       decoration-success="rfq_source == 'excel_upload'"
                       decoration-warning="rfq_source == 'system_generated'"
                       optional="show"/>
            </xpath>

            <xpath expr="//page[@name='PurchaseOrder']" position="inside">
                
                <div attrs="{'invisible': [('memo_type_key', '!=', 'procurement_request')]}" class="mb16">
                    <group string="RFQ UPLOAD" class="oe_border_info">
                        <div class="row">
                            <div class="col-md-4 text-right">
                                <button name="action_upload_rfq_wizard"
                                        string="RFQ Upload Wizard"
                                        type="object"
                                        class="btn-primary oe_highlight"
                                        icon="fa-upload"
                                        attrs="{'invisible': [('state', 'in', ['submit'])]}"
                                        help="Open wizard to download template and upload quotations"/>
                            </div>
                        </div>

                        <div class="row mt8" attrs="{'invisible': [('rfq_uploaded', '=', False)]}">
                            <div class="col-md-12">
                                <div class="alert alert-success" style="margin-bottom: 0;">
                                    <i class="fa fa-check-circle"/>
                                    <strong>RFQ last uploaded successfully on </strong>
                                    <field name="rfq_upload_date" readonly="1" widget="datetime" style="display: inline;"/>
                                    <br/>
                                    <small>File: <field name="rfq_excel_filename" readonly="1" style="display: inline;"/></small>
                                </div>
                            </div>
                        </div>
                    </group>
                </div>
            </xpath>
            
        </field>
    </record>
</odoo>
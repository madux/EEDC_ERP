<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">
  <!-- Wrapper -->
  <t t-name="tm_admin_dashboard.Root">
    <div class="o_tm_admin_dashboard" id="tm_ad_root">
      <!-- Filters -->
      <div class="tm-ad-toolbar">
        <div class="row g-2 align-items-end">
          <div class="col-md-2">
            <label class="form-label">Date From</label>
            <input id="tm_ad_date_from" type="date" class="form-control"/>
          </div>
          <div class="col-md-2">
            <label class="form-label">Date To</label>
            <input id="tm_ad_date_to" type="date" class="form-control"/>
          </div>
          <div class="col-md-2">
            <label class="form-label">Grain</label>
            <select id="tm_ad_grain" class="form-select">
              <option value="week">Week</option>
              <option value="month">Month</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label">Stage</label>
            <select id="tm_ad_stage" class="form-select" multiple>
              <option value="todo">To Do</option>
              <option value="in_progress">In Progress</option>
              <option value="review">Review</option>
              <option value="done">Done</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label">Priority</label>
            <select id="tm_ad_priority" class="form-select" multiple>
              <option value="2">High</option>
              <option value="1">Medium</option>
              <option value="0">Low</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label">Search (Name / Staff-ID)</label>
            <input id="tm_ad_q" type="text" class="form-control" placeholder="e.g. Jane or EEDC-00123"/>
          </div>
        </div>
        <div class="mt-2 d-flex gap-2">
          <button id="tm_ad_apply" class="btn btn-primary">Apply</button>
          <button id="tm_ad_reset" class="btn btn-light">Reset</button>
        </div>
      </div>

      <!-- KPIs -->
      <div class="row g-3 mt-3 tm-ad-kpis">
        <div class="col-md-2"><div class="tm-kpi"><div class="tm-kpi-label">Total</div><div id="tm_ad_kpi_total" class="tm-kpi-value">—</div></div></div>
        <div class="col-md-2"><div class="tm-kpi"><div class="tm-kpi-label">Overdue</div><div id="tm_ad_kpi_overdue" class="tm-kpi-value">—</div></div></div>
        <div class="col-md-2"><div class="tm-kpi"><div class="tm-kpi-label">Due Today</div><div id="tm_ad_kpi_today" class="tm-kpi-value">—</div></div></div>
        <div class="col-md-3"><div class="tm-kpi"><div class="tm-kpi-label">Done (in period)</div><div id="tm_ad_kpi_done_period" class="tm-kpi-value">—</div></div></div>
        <div class="col-md-3"><div class="tm-kpi"><div class="tm-kpi-label">Blocked</div><div id="tm_ad_kpi_blocked" class="tm-kpi-value">—</div></div></div>
      </div>

      <!-- Charts -->
      <div class="row g-3 mt-1">
        <div class="col-lg-4">
          <div class="tm-card">
            <div class="tm-card-head">Stage Distribution</div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_stage"></canvas></div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="tm-card">
            <div class="tm-card-head">Priority Mix</div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_priority"></canvas></div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="tm-card">
            <div class="tm-card-head">Overdue by Manager</div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_overdue_mgr"></canvas></div>
          </div>
        </div>
      </div>

      <div class="row g-3 mt-1">
        <div class="col-12">
          <div class="tm-card">
            <div class="tm-card-head d-flex align-items-center justify-content-between">
              <span>Tasks Over Time</span>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="tm_ad_stacked">
                <label class="form-check-label" for="tm_ad_stacked">Stack by Stage</label>
              </div>
            </div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_timeseries"></canvas></div>
          </div>
        </div>
      </div>

      <div class="row g-3 mt-1">
        <div class="col-lg-6">
          <div class="tm-card">
            <div class="tm-card-head">Top Employees (Done)</div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_emp_done"></canvas></div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="tm-card">
            <div class="tm-card-head">Top Overdue (Employees)</div>
            <div class="tm-card-body"><canvas id="tm_ad_chart_emp_overdue"></canvas></div>
          </div>
        </div>
      </div>
    </div>
  </t>
</templates>

<odoo>
    <data>
        <template id="my_portal_request" name="My Requests">
            <t t-call="portal.portal_layout" id="search_request_section">
                <section id="search_request_section">
                    <section id="website-app-section">  
                        <t t-call="portal_request.website_app_page"/>
                    </section>
                    
                    <div class="header-flex">
                        <div class="ms-lg-2">
                            <svg id="app-icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" class="bi bi-grid-fill thumbnail-btn custom-icon" viewBox="0 0 16 16">
                                <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5z"></path>
                            </svg>
                            <a id="previous" href="/" class="btn btn-secondary btn-sm p3">
                                Back
                            </a>
                            
                            <a t-if="current_memo_type_key" 
                                t-attf-href="/portal-request?memo_type_key={{current_memo_type_key}}" 
                                class="btn btn-primary">
                                    <i class="fa fa-plus"/> Create New <span t-esc="current_memo_type_key.replace('_', ' ').title()"/> Request
                            </a>
                            <a t-else="" 
                                href="/portal-request" 
                                class="btn btn-primary">
                                    <i class="fa fa-plus"/> Create New Request
                            </a>

                            <div class="btn-group">
                                <t t-if="current_memo_type_key">
                                    <a t-if="has_prev" 
                                    t-attf-href="/my/requests/{{current_memo_type_key}}/page/prev" 
                                    class="btn btn-secondary btn-sm p3"
                                    title="Previous">
                                        <i class="fa fa-chevron-left"/>
                                    </a>
                                    <button t-else="" class="btn btn-secondary btn-sm p3" disabled="disabled" style="opacity: 0.5; cursor: not-allowed;" title="Previous">
                                        <i class="fa fa-chevron-left"/>
                                    </button>
                                </t>
                                <t t-else="">
                                    <a t-if="has_prev" 
                                    href="/my/requests/page/prev" 
                                    class="btn btn-secondary btn-sm p3"
                                    title="Previous">
                                        <i class="fa fa-chevron-left"/>
                                    </a>
                                    <button t-else="" class="btn btn-secondary btn-sm p3" disabled="disabled" style="opacity: 0.5; cursor: not-allowed;" title="Previous">
                                        <i class="fa fa-chevron-left"/>
                                    </button>
                                </t>
                            </div>

                            <div class="pagination-input-group">
                                <input type="number" 
                                    id="page_input" 
                                    class="page-input" 
                                    t-att-value="current_page"
                                    t-att-data-type="current_memo_type_key or ''"
                                    t-att-min="1"
                                    t-att-max="total_pages"/>
                                <span class="pagination-separator">/</span>
                                <span class="pagination-total" t-esc="total_pages"/>
                            </div>

                            <div class="btn-group">
                                <t t-if="current_memo_type_key">
                                    <a t-if="has_next" 
                                    t-attf-href="/my/requests/{{current_memo_type_key}}/page/next" 
                                    class="btn btn-secondary btn-sm p3"
                                    title="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </a>
                                    <button t-else="" class="btn btn-secondary btn-sm p3" disabled="disabled" style="opacity: 0.5; cursor: not-allowed;" title="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </button>
                                </t>
                                <t t-else="">
                                    <a t-if="has_next" 
                                    href="/my/requests/page/next" 
                                    class="btn btn-secondary btn-sm p3"
                                    title="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </a>
                                    <button t-else="" class="btn btn-secondary btn-sm p3" disabled="disabled" style="opacity: 0.5; cursor: not-allowed;" title="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </button>
                                </t>
                            </div>
                        </div>
                        <t t-out="0"/>
                        
                        <form method="get">
                            <div class="input-group input-group-sm w-100">
                                <input type="text" class="form-control form-control-sm" placeholder="Search" t-att-value='search' name="search_input_panel" id="search_input_panel"/>
                                <a class="btn btn-secondary o_wait_lazy_js search_panel_btn" id="search_panel">
                                    <span class="fa fa-search"/> 
                                </a>
                            </div>
                        </form>
                    </div>
                    
                    <div t-if="not requests and not memo_requests" class="alert alert-info">
                        There are currently no Request for your account.
                    </div>
                    <t t-else="">
                        <t t-call="portal.portal_table">
                            <thead>
                                <tr>
                                    <th>Subject</th>
                                    <th>Request #</th>
                                    <th class="text-end" t-if="groupby != 'create_date'">Approver</th>
                                    <th id="ticket_user_date">Request Date</th>
                                    <th id="ticket_user_header">Employee</th>
                                    <th colspan="5" class="text-end">Status</th>
                                </tr>
                            </thead>
                            
                            <t t-set="display_requests" t-value="memo_requests or requests"/>
                            <t t-foreach="display_requests" t-as="request">
                                <tr>
                                    <td class="text-start"><a t-attf-href="/my/request/view/{{request.id}}"><small></small><span class="ms-2" t-field="request.name"/></a></td>
                                    <td class="text-start"><a t-attf-href="/my/request/view/{{request.id}}"><small>#</small><span class="ms-2" t-field="request.code"/></a></td>
                                    <td class="text-start"><a t-attf-href="/my/request/view/{{request.id}}"><span class="ms-2" t-field="request.approver_id.name"/></a></td>
                                    <td class="text-start">
                                        <a t-attf-href="/my/request/view/{{request.id}}"><span t-field="request.date" t-options='{"widget": "datetime", "hide_seconds": True}'/></a>
                                    </td>
                                    <td id="request_user">
                                        <a t-attf-href="/my/request/view/{{request.id}}">
                                            <img t-if="request.employee_id.user_id" class="rounded-circle o_portal_contact_img" t-attf-src="#{image_data_uri(request.employee_id.user_id.sudo().avatar_1024)}" alt="Contact" style="width: 20px; height: 20px;"/>
                                            <span t-field="request.employee_id.user_id"/>
                                        </a>
                                    </td>
                                    <td id="request_stage" class="text-end p-2">
                                        <a t-attf-href="/my/request/view/{{request.id}}">
                                            <span t-attf-class="badge rounded-pill text-bg-info me-2"
                                                t-esc="request.stage_id.name"/>
                                        </a>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        
                        <section class="s_faq_collapse pt32 pb32 o_colored_level" data-snippet="s_faq_collapse" data-name="Accordion" style="background-image: none;">
                            <div class="container">
                                <div id="myCollapseList" class="accordion" role="tablist">
                                    <div class="card bg-white" data-name="Item">
                                        <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="true" class="card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_1List">Material request</a>
                                        <div class="collapse show" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_1List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="request_body">This displays the list of all material request you have initiated as a portal User</p>
                                                <a id="material_request_view " href="/my/requests/material_request" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_2List">Procurement Request</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_2List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="request_comments">This displays the list of all Procurement request you have initiated as a portal User.</p>
                                                <a id="procurement_view" href="/my/requests/procurement_request" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_3List">Payment Request</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_3List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="payment_request">This displays the list of all payment request you have initiated as a portal User.</p>
                                                <a id="payment_view" href="/my/requests/Payment" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_4List">Vehicle Request</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_4List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="vehicle_request">This displays the list of all vehicle request you have initiated as a portal User.</p>
                                                <a id="vehicle_view" href="/my/requests/vehicle_request" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_5ist">Leave Request</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_5ist">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="leave_request">This displays the list of all leave request you have initiated as a portal User.</p>
                                                <a id="leave_view" href="/my/requests/leave_request" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="/my/requests/cash_advance" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_6List">Cash Advance</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_6List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="cash_advance">This displays the list of all cash advance request you have initiated as a portal User.</p>
                                                <a id="cash_advance_view" href="/my/requests/cash_advance" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="/my/requests/soe" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_7List">Statement of Expense</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_7List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="soe">This displays the list of all Statement of Expense request you have initiated as a portal User.</p>
                                                <a id="soe_view" href="/my/requests/soe" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="/my/requests/internal" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_8List">Internal Request / Server Access</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_8List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="soe">This displays the list of all internal request / server access request you have initiated as a portal User.</p>
                                                <a id="server_access_view" href="/my/requests/internal" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-white" data-name="Item">
                                        <a href="/my/requests/employee_update" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="collapsed card-header o_default_snippet_text" data-bs-target="#myCollapseTab488915_9List">Employee Update</a>
                                        <div class="collapse" data-bs-parent="#myCollapseList" role="tabpanel" id="myCollapseTab488915_9List">
                                            <div class="card-body">
                                                <p class="card-text o_default_snippet_text" id="soe">This displays the list of all employee update request you have initiated as a portal User.</p>
                                                <a id="employee_update_view" href="/my/requests/employee_update" class="btn btn-secondary btn-sm">View Requests</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </t>
                </section>
            </t>
        </template>
    </data>
</odoo>
<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
      <record id="view_asset_tracking_form" model="ir.ui.view">
        <field name="name">asset.tracking.form</field>
        <field name="model">asset.tracking</field>
        <field name="arch" type="xml">
          <form string="Asset">
            <header>
                <button name="transfer_asset" string="Transfer" attrs="{'invisible': [('state', '!=', 'draft')]}" help="This will set state to transfer" confirm="You have already running asset, Are you sure you want to Transfer?" type="object" class="oe_highlight"/>
                <button name="receive_and_calculate" string="Receive &amp; Compute" invisible="state != 'transfer'" confirm="You have already running asset, Are you sure you want to Receive &amp; Compute?" type="object" class="oe_highlight"/>
                <button name="action_view_asset_history" string="View Asset History" type="object"/>
                <field name="state" widget="statusbar" statusbar_visible="draft,transfer,received" readonly="1"/>
            </header>
            <sheet>
                <group>
                  <group>
                      <field name="name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                      <field name="asset_code" required="1" class="form-control" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                      <field name="asset_id" readonly="1" force_save="1" required="1" class="form-control"/>
                      <field name="category" class="form-control" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                      <field name="date_of_commission" class="form-control"/>
                      <field name="serial_number" string="New Asset Number" invisible="1" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control" help="Incase you want to change asset number while moving"/>
                  </group>
                  <group>
                    <field name="transfer_expense" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="source_location_id" required="1" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                    <field name="assigned_to" required="0" class="form-control" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="date_of_assignment" readonly="1" class="form-control"/>
                    <field name="date_of_transfer" readonly="1" class="form-control"/>
                    <field name="new_asset_id" readonly="1" invisible="1" class="form-control"/>
                    <field name="note" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control" placeholder="Enter notes..."/>
                  </group>
                  <notebook>
                      <page name="asset_Historynam" string="Asset History" id="asset_History">
                          <field
                              name="asset_history_ids"
                              readonly="1"
                              domain="[('active', 'in', [True, False])]"
                          />
                      </page>
                  </notebook>
              </group>
            </sheet>
          </form>
        </field>
      </record>

      <record id="view_asset_tracking_tree" model="ir.ui.view">
        <field name="name">asset.tracking.tree</field>
        <field name="model">asset.tracking</field>
        <field name="arch" type="xml">
          <tree>
            <header>
                <button name="receive_and_calculate" string="Receive &amp; Compute" confirm="You have already running asset, Are you sure you want to Receive &amp; Compute?" type="object" class="oe_highlight"/>
            </header>
            <field name="asset_code"/>
            <field name="name"/>
            <field name="category"/>
            <field name="assigned_to"/>
            <field name="source_location_id"/>
            <field name="previous_location"/>
            <field name="date_of_assignment"/>
            <field name="date_of_transfer"/>
            <field name="state"/>
          </tree>
        </field>
      </record>
 
      <record model="ir.ui.view" id="view_asset_tracking_search_id">
        <field name="name">asset.tracking.search</field>
        <field name="model">asset.tracking</field>
        <field name="arch" type="xml">
          <search string="Internal Memo Filter"> 
            <field name="name"/>
            <field name="asset_code"/>
            <field name="serial_number"/>
            <filter name="drft" string="Draft" domain="[('state','=','draft')]" help="Assets that are available"/>
            <filter name="assign" string="Assigned" domain="[('state','=','transfer')]" help="Assets currently assigned"/>
            <filter name="mainten" string="Under Maintenance" domain="[('state','=','maintenance')]"/>
            <filter name="dispos" string="Disposed" domain="[('state','=','disposed')]"/>

            <group expand="0" string="Group By">
              <filter string="Status" name="group_by_status" context="{'group_by': 'state'}"/>
              <filter string="Category" name="group_by_category" context="{'group_by': 'category'}"/>
              <filter string="Assigned To" name="group_by_assigned" context="{'group_by': 'assigned_to'}"/>
            </group>
          </search>
        </field>
      </record>

      <record id="action_asset_tracking" model="ir.actions.act_window">
        <field name="name">Assets</field>
        <field name="res_model">asset.tracking</field>
        <field name="view_mode">tree,form</field>
      </record>

      <record model="ir.ui.view" id="account_asset_tracking_inherit_view_form">
          <field name="name">account.asset</field>
          <field name="model">account.asset</field>
          <field name="inherit_id" ref="account_asset.view_account_asset_form"/>
          <field name="arch" type="xml"> 
              <xpath expr="//field[@name='original_value']" position="after">
                  <field name="source_location_id" required="0" readonly="0" force_save="1" invisible="0"/>
                  <field name="previous_location" required="0" readonly="0" force_save="1" invisible="0"/>
              </xpath> 
          </field>
      </record> 
    </data>
</odoo>